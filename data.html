

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Datasets &mdash; SketchGraphs  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Onshape setup" href="onshape_setup.html" />
    <link rel="prev" title="SketchGraphs models" href="models.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> SketchGraphs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="models.html">SketchGraphs models</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tarballs">Tarballs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#filtered-sequence">Filtered sequence</a></li>
<li class="toctree-l2"><a class="reference internal" href="#full-sequence">Full sequence</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="onshape_setup.html">Onshape setup</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="_autosummary/sketchgraphs.html">sketchgraphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="_autosummary/sketchgraphs_models.html">sketchgraphs_models</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SketchGraphs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Datasets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/data.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="datasets">
<h1>Datasets<a class="headerlink" href="#datasets" title="Permalink to this headline">¶</a></h1>
<p>We provide three datasets at various levels of pre-processing in order to enable a wide variety of uses
while ensuring that it is possible to quickly get started on this data. We describe each dataset below.</p>
<div class="section" id="tarballs">
<h2>Tarballs<a class="headerlink" href="#tarballs" title="Permalink to this headline">¶</a></h2>
<p>The raw json data as obtained from Onshape. This is provided as a set of 128 tar archives which are compressed
using <a class="reference external" href="https://facebook.github.io/zstd/">zstandard</a>.
They total about 43GB of data. In general, we only recommend these for advanced usage, as
they are heavy and require extensive processing to manipulate.
Users who wish to directly access the json from python may be interested in the utility function
<a class="reference internal" href="_autosummary/sketchgraphs.pipeline.make_sketch_dataset.html#sketchgraphs.pipeline.make_sketch_dataset.load_json_tarball" title="sketchgraphs.pipeline.make_sketch_dataset.load_json_tarball"><code class="xref any py py-func docutils literal notranslate"><span class="pre">sketchgraphs.pipeline.make_sketch_dataset.load_json_tarball</span></code></a>, which iterates through a single compressed tarball
and enumerates the sketches in the tarball.
The data is available for download <a class="reference external" href="https://sketchgraphs.cs.princeton.edu/shards/">here</a>.</p>
</div>
<div class="section" id="filtered-sequence">
<h2>Filtered sequence<a class="headerlink" href="#filtered-sequence" title="Permalink to this headline">¶</a></h2>
<p>The filtered sequences are the most convenient dataset to use, and are provided ready to use with ML models.
They are stored in a custom binary format, which can be read using <a class="reference internal" href="_autosummary/sketchgraphs.data.flat_array.html#sketchgraphs.data.flat_array.load_dictionary_flat" title="sketchgraphs.data.flat_array.load_dictionary_flat"><code class="xref any py py-func docutils literal notranslate"><span class="pre">sketchgraphs.data.flat_array.load_dictionary_flat</span></code></a>,
by for example executing:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sketchgraphs.data</span> <span class="k">import</span> <span class="n">flat_array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">flat_array</span><span class="o">.</span><span class="n">load_dictionary_flat</span><span class="p">(</span><span class="s1">&#39;sg_t16_train.npy&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;sequences&#39;</span><span class="p">]</span>
<span class="go">FlatArray(len=9179789, mem=5.3 GB)</span>
</pre></div>
</div>
<p>In addition to the sequences, which may be accessed through the <code class="docutils literal notranslate"><span class="pre">data['sequences']</span></code> key, the sequence files
also contain an integer array of the same length which record the length of each sequence, accessed through
the <code class="docutils literal notranslate"><span class="pre">data['sequence_lengths']</span></code> key, and a structured array which contains an identifier uniquely identifying
the sketch, accessed through the <code class="docutils literal notranslate"><span class="pre">data['sketch_ids']</span></code> key. The latter is an array of tuples, the first element
being the document id of the sketch, the second being the part index in that document, and the last being the
sketch index in that part.</p>
<p>This data is pre-split into a <a class="reference external" href="https://sketchgraphs.cs.princeton.edu/sequence/sg_t16_train.npy">train</a>,
<a class="reference external" href="https://sketchgraphs.cs.princeton.edu/sequence/sg_t16_test.npy">test</a> and
<a class="reference external" href="https://sketchgraphs.cs.princeton.edu/sequence/sg_t16_validation.npy">validation</a> set (the training set
is formed from the shards 1-120, the validation set from the shards 121-124, and the testing set from the
shards 125-128). Additionally, we also provide pre-computed <a class="reference external" href="https://sketchgraphs.cs.princeton.edu/sequence/sg_t16_train.stats.pkl.gz">quantization statistics</a>,
computed on the training set using the <a class="reference internal" href="_autosummary/sketchgraphs.pipeline.make_quantization_statistics.html#module-sketchgraphs.pipeline.make_quantization_statistics" title="sketchgraphs.pipeline.make_quantization_statistics"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">sketchgraphs.pipeline.make_quantization_statistics</span></code></a> script.
These quantization statistics are used by the models in order to handle continuous parameters.</p>
</div>
<div class="section" id="full-sequence">
<h2>Full sequence<a class="headerlink" href="#full-sequence" title="Permalink to this headline">¶</a></h2>
<p>As a middle-ground between the filtered sequences and the json tarballs, we also provide the full sequences,
which are directly converted from the json tarballs with no filtering (except the exclusing of empty sketches).
This full sequence file is available <a class="reference external" href="https://sketchgraphs.cs.princeton.edu/sequence/sg_all.npy">here</a>
(warning: 15GB download), and contains the sequence representation of all the sketches in the dataset.
We note that although it is mostly equivalent to the data contained in the tarballs for ML purposes, it is much smaller
as many of the original identifiers are discarded and renamed to sequential indices.</p>
<p>The full sequence may be accessed in the same fashion as the filtered sequences (using the <a class="reference internal" href="_autosummary/sketchgraphs.data.flat_array.html#module-sketchgraphs.data.flat_array" title="sketchgraphs.data.flat_array"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">sketchgraphs.data.flat_array</span></code></a>
module). Note that the full sequence file contains all sketches, and does not provide any train / test split.
Additionally, users should be warned that the dataset contains substantial outliers (for example, the largest sketch in the
dataset contains more than 350 thousand operations, whereas the 99th percentile is “only” 640 operations).</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="onshape_setup.html" class="btn btn-neutral float-right" title="Onshape setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="models.html" class="btn btn-neutral float-left" title="SketchGraphs models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Ari Seff, Yaniv Ovadia, Wenda Zhou, Ryan P. Adams

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>